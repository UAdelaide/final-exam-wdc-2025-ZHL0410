<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dog Of The Day</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
    <h1>Dog Of The Day</h1>
    <p>Welcome to Express</p>
<script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                   singleDogImage: ''
                };
            },

            async mounted() {
                const singleDogImageRes = await fetch('https://dog.ceo/api/breeds/image/random');
                const singleDog = await singleDogImageRes.json();
                this.singleDogImage = singleDog.message;
            },

            methods: {
                async sendMessage(){
                    if (!this.selectedItem.BookID || !this.messageText.trim()){
                        return alert('Please select a book and enter a message.');
                    }
                    await fetch('/api/messages', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ bookID: this.selectedItem.BookID, sellerID:this.selectedItem.SellerID, message: this.messageText })
                    });
                    alert('Message sent!');
                    this.messageText = '';
                }
            }
        }).mount('#app');
    </script>
</body>
</html>